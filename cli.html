<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CLI &#8212; Wayback Tweets Documentation (1.0.x)</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/flask.css?v=b87c8d14" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=34aeb135" />
    <script src="_static/documentation_options.js?v=f2a433a1"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="_static/parthenon.svg"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API" href="api.html" />
    <link rel="prev" title="TODO" href="todo.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api.html" title="API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="todo.html" title="TODO"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Wayback Tweets Documentation (1.0.x)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">CLI</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="cli">
<h1>CLI<a class="headerlink" href="#cli" title="Link to this heading">¶</a></h1>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<section id="waybacktweets">
<h3>waybacktweets<a class="headerlink" href="#waybacktweets" title="Link to this heading">¶</a></h3>
<p>Retrieves archived tweets CDX data from the Wayback Machine,
performs necessary parsing, and saves the data.</p>
<p>USERNAME: The Twitter username without &#64;.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>waybacktweets<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span>USERNAME
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-waybacktweets-collapse">
<span class="sig-name descname"><span class="pre">--collapse</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;collapse&gt;</span></span><a class="headerlink" href="#cmdoption-waybacktweets-collapse" title="Link to this definition">¶</a></dt>
<dd><p>Collapse results based on a field, or a substring of a field. XX in the timestamp value ranges from 1 to 14, comparing the first XX digits of the timestamp field. It is recommended to use from 4 onwards, to compare at least by years.</p>
<dl class="field-list simple">
<dt class="field-odd">Options<span class="colon">:</span></dt>
<dd class="field-odd"><p>urlkey | digest | timestamp:XX</p>
</dd>
</dl>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-waybacktweets-from">
<span class="sig-name descname"><span class="pre">--from</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;DATE&gt;</span></span><a class="headerlink" href="#cmdoption-waybacktweets-from" title="Link to this definition">¶</a></dt>
<dd><p>Filtering by date range from this date. Format: YYYYmmdd</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-waybacktweets-to">
<span class="sig-name descname"><span class="pre">--to</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;DATE&gt;</span></span><a class="headerlink" href="#cmdoption-waybacktweets-to" title="Link to this definition">¶</a></dt>
<dd><p>Filtering by date range up to this date. Format: YYYYmmdd</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-waybacktweets-limit">
<span class="sig-name descname"><span class="pre">--limit</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;limit&gt;</span></span><a class="headerlink" href="#cmdoption-waybacktweets-limit" title="Link to this definition">¶</a></dt>
<dd><p>Query result limits.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-waybacktweets-offset">
<span class="sig-name descname"><span class="pre">--offset</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;offset&gt;</span></span><a class="headerlink" href="#cmdoption-waybacktweets-offset" title="Link to this definition">¶</a></dt>
<dd><p>Allows for a simple way to scroll through the results.</p>
</dd></dl>

<p class="rubric">Arguments</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-waybacktweets-arg-USERNAME">
<span class="sig-name descname"><span class="pre">USERNAME</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-waybacktweets-arg-USERNAME" title="Link to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</section>
</section>
<section id="collapsing">
<h2>Collapsing<a class="headerlink" href="#collapsing" title="Link to this heading">¶</a></h2>
<p>The Wayback Tweets command line tool recommends the use of three types of “collapse”: <code class="docutils literal notranslate"><span class="pre">urlkey</span></code>, <code class="docutils literal notranslate"><span class="pre">digest</span></code>, and <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> field.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">urlkey</span></code>: (<cite>str</cite>) A canonical transformation of the URL you supplied, for example, <code class="docutils literal notranslate"><span class="pre">org,eserver,tc)/</span></code>. Such keys are useful for indexing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">digest</span></code>: (<cite>str</cite>) The <code class="docutils literal notranslate"><span class="pre">SHA1</span></code> hash digest of the content, excluding the headers. It’s usually a base-32-encoded string.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code>: (<cite>datetime</cite>) A 14 digit date-time representation in the <code class="docutils literal notranslate"><span class="pre">YYYYMMDDhhmmss</span></code> format. We recommend <code class="docutils literal notranslate"><span class="pre">YYYYMMDD</span></code>.</p></li>
</ul>
<p>However, it is possible to use it with other options. Read below text extracted from the official Wayback CDX Server API (Beta) documentation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A new form of filtering is the option to “collapse” results based on a field, or a substring of a field. Collapsing is done on adjacent CDX lines where all captures after the first one that are duplicate are filtered out. This is useful for filtering out captures that are “too dense” or when looking for unique captures.</p>
<p>To use collapsing, add one or more <code class="docutils literal notranslate"><span class="pre">collapse=field</span></code> or <code class="docutils literal notranslate"><span class="pre">collapse=field:N</span></code> where <code class="docutils literal notranslate"><span class="pre">N</span></code> is the first <code class="docutils literal notranslate"><span class="pre">N</span></code> characters of field to test.</p>
<ul>
<li><p>Ex: Only show at most 1 capture per hour (compare the first 10 digits of the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> field). Given 2 captures <code class="docutils literal notranslate"><span class="pre">20130226010000</span></code> and <code class="docutils literal notranslate"><span class="pre">20130226010800</span></code>, since first 10 digits <code class="docutils literal notranslate"><span class="pre">2013022601</span></code> match, the 2nd capture will be filtered out:</p>
<blockquote>
<div><p><a class="reference external" href="http://web.archive.org/cdx/search/cdx?url=google.com&amp;collapse=timestamp:10" rel="noopener noreferrer" target="_blank">http://web.archive.org/cdx/search/cdx?url=google.com&amp;collapse=timestamp:10</a></p>
<p>The calendar page at <cite>web.archive.org</cite> uses this filter by default: <cite>http://web.archive.org/web/*/archive.org</cite></p>
</div></blockquote>
</li>
<li><p>Ex: Only show unique captures by <code class="docutils literal notranslate"><span class="pre">digest</span></code> (note that only adjacent digest are collapsed, duplicates elsewhere in the cdx are not affected):</p>
<blockquote>
<div><p><a class="reference external" href="http://web.archive.org/cdx/search/cdx?url=archive.org&amp;collapse=digest" rel="noopener noreferrer" target="_blank">http://web.archive.org/cdx/search/cdx?url=archive.org&amp;collapse=digest</a></p>
</div></blockquote>
</li>
<li><p>Ex: Only show unique urls in a prefix query (filtering out captures except first capture of a given url). This is similar to the old prefix query in wayback (note: this query may be slow at the moment):</p>
<blockquote>
<div><p><a class="reference external" href="http://web.archive.org/cdx/search/cdx?url=archive.org&amp;collapse=urlkey&amp;matchType=prefix" rel="noopener noreferrer" target="_blank">http://web.archive.org/cdx/search/cdx?url=archive.org&amp;collapse=urlkey&amp;matchType=prefix</a></p>
</div></blockquote>
</li>
</ul>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/parthenon.svg" alt="Logo"/>
            </a></p>
  

  <h3>Contents</h3>
  <ul>
<li><a class="reference internal" href="#">CLI</a><ul>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#waybacktweets">waybacktweets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#collapsing">Collapsing</a></li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
  <li><a href="index.html">Overview</a>
    <ul>
          <li>Previous: <a href="todo.html" title="previous chapter">TODO</a>
          <li>Next: <a href="api.html" title="next chapter">API</a>
    </ul>
  </li>
</ul>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="footer" role="contentinfo">
    &#169; Copyright 2023 - 2024, Claromes · Icon by The Doodle Library.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    </div>
  <script src="_static/version_warning_offset.js"></script>

  </body>
</html>